<div class="container mt-5">
      <h2 class="text-center mb-4">üìö Kh√≥a H·ªçc C·ªßa T√¥i</h2>

      <div class="table-responsive">
            <table class="table table-striped table-hover align-middle text-center">
                  <thead class="table-dark">
                        <tr>
                              <th scope="col">#</th>
                              <th scope="col">T√™n Kh√≥a H·ªçc</th>
                              <th scope="col">M√¥ T·∫£</th>
                              <th scope="col">·∫¢nh</th>
                              <th scope="col">H√†nh ƒê·ªông</th>
                        </tr>
                  </thead>
                  <tbody>
                        {{#each courses}}
                        <tr>
                              <th scope="row">{{sum @index 1 }}</th>
                              <td class="fw-bold">{{this.name}}</td>
                              <td>{{this.description}}</td>
                              <td>
                                    <img src="{{this.image}}" alt="{{this.name}}" class="rounded shadow-sm"
                                          style="width: 80px; height: 80px; object-fit: cover;">
                              </td>
                              <td>
                                    <div class="d-flex justify-content-center gap-2">
                                          <a href="/course/{{this.slug}}" class="btn btn-sm btn-primary">
                                                <i class="bi bi-eye"></i> Xem
                                          </a>
                                          <a href="/course/{{this._id}}/edit" class="btn btn-sm btn-warning">
                                                <i class="bi bi-pencil-square"></i> S·ª≠a
                                          </a>
                                          <button class="btn btn-sm btn-danger btn-delete" data-id="{{this._id}}"
                                                data-bs-toggle="modal" data-bs-target="#deleteModal">
                                                <i class="bi bi-trash"></i> X√≥a
                                          </button>
                                    </div>
                              </td>
                        </tr>
                        {{/each}}
                  </tbody>
            </table>
      </div>
</div>

<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
      <div class="modal-dialog">
            <div class="modal-content">
                  <div class="modal-header">
                        <h5 class="modal-title" id="deleteModalLabel">X√°c Nh·∫≠n X√≥a Kh√≥a H·ªçc</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                        B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√≥a h·ªçc n√†y kh√¥ng?
                  </div>
                  <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
                        <button type="button" class="btn btn-danger" id="confirmDelete">X√≥a</button>
                  </div>
            </div>
      </div>
</div>

<form action="/course/{{this._id}}/delete" method="POST" id="deleteForm">
      <input type="hidden" name="_method" value="DELETE">
</form>

<script>
      document.querySelectorAll('.btn-delete').forEach(btn => {
            btn.addEventListener('click', function () {
                  const courseId = this.getAttribute('data-id');
                  document.querySelector('#deleteForm').action = `/course/${courseId}/delete?_method=DELETE`;
            });
      });

      document.querySelector('#confirmDelete').addEventListener('click', function () {
            document.querySelector('#deleteForm').submit();
      });

</script>